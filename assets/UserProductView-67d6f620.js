import{e as E,l as T,g as V,r as b,o as l,c as u,a as s,h as i,i as L,j as k,v as U,u as g,k as x,b as R,F as I,s as w,n as m,A as v}from"./index-ffe0db42.js";const A={class:"container"},C={class:"about"},D={class:"modal-body"},P={class:"row"},$={class:"col-sm-6"},B=["src"],N={class:"col-sm-6"},S={class:"badge bg-primary rounded-pill"},H={key:0,class:"h5"},M={key:1},O={class:"h6"},q={class:"h5"},F={class:"input-group"},W=E({__name:"UserProductView",setup(j){const{VITE_URL:p,VITE_PATH:_}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"tuhacrt",VITE_TOKEN:"loginToken",VITE_TEXT:"Environment is in production build",BASE_URL:"/Hexschool_Vue_Week7/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},h=w(),t=T({product:{},isLoading:!1});let n=1;const f=async()=>{var r;const{id:d}=h.params,o=`${p}/api/${_}/product/${d}`;t.isLoading=!0;try{const a=await m.get(o);t.isLoading=!1,t.product=a.data.product}catch(a){a instanceof v&&alert((r=a.response)==null?void 0:r.data.message)}},y=async(d,o=1)=>{var c;const r=`${p}/api/${_}/cart`,a={product_id:d,qty:o};t.isLoading=!0;try{const e=await m.post(r,{data:a});t.isLoading=!1,n=1,alert(e.data.message)}catch(e){e instanceof v&&alert((c=e.response)==null?void 0:c.data.message)}};return V(()=>{f()}),(d,o)=>{var a,c;const r=b("Loading");return l(),u(I,null,[s("div",A,[s("div",C,[s("h1",null,i(t.product.title),1),s("div",D,[s("div",P,[s("div",$,[(a=t.product)!=null&&a.imagesUrl?(l(),u("img",{key:0,class:"img-fluid",src:(c=t.product)==null?void 0:c.imagesUrl[0],alt:""},null,8,B)):L("",!0)]),s("div",N,[s("span",S,i(t.product.category),1),s("p",null,"商品描述："+i(t.product.description),1),s("p",null,"商品內容："+i(t.product.content),1),t.product.price<t.product.origin_price?(l(),u("div",H,i(t.product.origin_price)+" 元 ",1)):(l(),u("div",M,[s("del",O,"原價 "+i(t.product.origin_price)+" 元",1),s("div",q,"現在只要 "+i(t.product.price)+" 元",1)])),s("div",null,[s("div",F,[k(s("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>x(n)?n.value=e:n=e),min:"1",type:"number",class:"form-control"},null,512),[[U,g(n),void 0,{number:!0}]]),s("button",{type:"button",class:"btn btn-primary",onClick:o[1]||(o[1]=e=>y(t.product.id,g(n)))}," 加入購物車 ")])])])])])])]),R(r,{active:t.isLoading,"onUpdate:active":o[2]||(o[2]=e=>t.isLoading=e),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});export{W as default};
